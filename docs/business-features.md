# Universal Shop 业务功能说明文档

## 1. 系统概述

Universal Shop 是一个功能完备的轻量级电商系统，涵盖了从商品展示到订单处理的完整电商业务流程。系统分为用户门户和管理后台两个主要模块，支持多语言和移动端访问。

## 2. 用户门户功能

### 2.1 首页与商品展示

#### 2.1.1 商品浏览
- **商品列表**: 支持分页浏览所有在售商品
- **商品分类**: 按分类筛选商品（支持自定义分类）
- **商品搜索**: 支持按商品名称搜索（支持中文、英文、泰文）
- **商品排序**: 支持按价格、时间、销量排序
- **商品筛选**: 支持价格区间、库存状态筛选

#### 2.1.2 商品详情
- **详细信息**: 商品名称、描述、价格、库存状态
- **商品图片**: 高质量商品图片展示
- **价格显示**: 
  - 原价展示
  - 折扣价计算（支持百分比折扣）
  - 货币符号本地化（默认泰铢฿）
- **库存状态**: 实时库存数量显示
- **操作按钮**: 加入购物车、立即购买

### 2.2 用户账户系统

#### 2.2.1 用户注册
- **注册方式**: 手机号注册（主要方式）
- **必填信息**: 
  - 手机号（10位以上数字，不能以0开头）
  - 用户昵称
  - 登录密码（最少6位）
- **可选信息**:
  - 邮箱地址
  - 推荐码（注册时填写）
- **验证机制**: 
  - 手机号格式验证
  - 邮箱格式验证
  - 密码强度验证

#### 2.2.2 用户登录
- **登录方式**: 
  - 手机号 + 密码
  - 邮箱 + 密码（如果设置了邮箱）
- **会话管理**: JWT token认证，7天有效期
- **自动登录**: 记住登录状态
- **安全机制**: 密码bcrypt加密存储

#### 2.2.3 个人中心
- **个人信息**:
  - 查看和编辑昵称
  - 查看注册手机号
  - 修改邮箱地址
  - 修改登录密码
- **推荐系统**:
  - 查看个人推荐码
  - 推荐好友注册
  - 推荐记录查看
- **账户安全**:
  - 最后登录时间
  - 账户状态查看
  - 密码修改

### 2.3 购物车系统

#### 2.3.1 购物车管理
- **商品添加**: 
  - 从商品详情页添加
  - 指定商品数量
  - 重复添加自动累加数量
- **购物车查看**:
  - 商品列表显示
  - 商品图片、名称、价格
  - 数量调整（增加/减少）
  - 小计金额计算
- **购物车操作**:
  - 修改商品数量
  - 删除购物车商品
  - 清空购物车
  - 选择结算商品

#### 2.3.2 匿名购物车
- **游客支持**: 未登录用户可使用购物车
- **会话存储**: 基于sessionId存储购物车数据
- **登录合并**: 登录后自动合并匿名购物车

#### 2.3.3 购物车计算
- **价格计算**: 
  - 单品价格 × 数量 = 小计
  - 应用商品折扣
  - 计算总金额
- **实时更新**: 商品价格变动实时反映
- **库存检查**: 下单前验证商品库存

### 2.4 订单系统

#### 2.4.1 下单流程
- **订单确认页**:
  - 商品清单确认
  - 收货地址选择
  - 支付方式选择
  - 订单备注填写
- **订单生成**:
  - 自动生成唯一订单号
  - 锁定商品价格（下单时价格）
  - 扣减商品库存
  - 创建订单记录

#### 2.4.2 支付方式
- **货到付款 (COD)**:
  - 默认支付方式
  - 送达时现金支付
  - 无需在线支付
- **在线支付**:
  - 预留支付接口
  - 支持扩展第三方支付

#### 2.4.3 订单管理
- **订单状态跟踪**:
  - `pending`: 待支付
  - `paid`: 已支付  
  - `shipped`: 已发货
  - `delivered`: 已送达
  - `cancelled`: 已取消
- **订单操作**:
  - 查看订单详情
  - 取消订单（待支付状态）
  - 确认收货

#### 2.4.4 订单详情
- **基本信息**:
  - 订单号、下单时间
  - 订单状态、支付方式
  - 订单总金额
- **商品信息**:
  - 商品列表
  - 下单时价格
  - 购买数量
- **收货信息**:
  - 收货人姓名、电话
  - 收货地址
  - 订单备注

### 2.5 地址管理

#### 2.5.1 地址信息
- **收货人信息**:
  - 收货人姓名
  - 联系电话
- **地址信息**:
  - 省份、城市、区县
  - 详细地址
  - 邮政编码（可选）
- **地址类型**:
  - 家庭地址
  - 公司地址
  - 其他地址

#### 2.5.2 地址操作
- **地址管理**:
  - 添加新地址
  - 编辑现有地址
  - 删除地址
- **默认地址**:
  - 设置默认收货地址
  - 下单时自动选择默认地址
  - 支持多个地址切换

## 3. 管理后台功能

### 3.1 管理员系统

#### 3.1.1 角色权限
- **超级管理员 (super_admin)**:
  - 所有功能权限
  - 系统配置管理
  - 操作日志查看
  - 管理员账户管理
- **管理员 (admin)**:
  - 商品、订单、用户管理
  - 数据统计查看
  - 管理员账户管理
- **操作员 (operator)**:
  - 商品、订单、用户基本操作
  - 有限的数据查看权限

#### 3.1.2 管理员登录
- **登录方式**: 用户名 + 密码
- **安全机制**:
  - 密码bcrypt加密
  - JWT token认证
  - 权限验证中间件
- **会话管理**: 独立的管理员会话管理

### 3.2 商品管理

#### 3.2.1 商品信息管理
- **基本信息**:
  - 商品名称（支持多语言）
  - 商品描述
  - 商品分类
  - 商品状态（上架/下架）
- **价格库存**:
  - 商品价格
  - 折扣设置（百分比折扣）
  - 库存数量
  - 库存预警
- **商品图片**:
  - 图片上传功能
  - 支持多种格式（jpg, png, gif, webp）
  - 图片大小限制（最大10MB）
  - 图片预览和管理

#### 3.2.2 商品操作
- **批量操作**:
  - 批量上架/下架
  - 批量价格调整
  - 批量分类修改
- **搜索筛选**:
  - 按商品名称搜索
  - 按分类筛选
  - 按库存状态筛选
  - 按上架状态筛选
- **商品统计**:
  - 商品总数统计
  - 分类分布统计
  - 库存状态统计

### 3.3 订单管理

#### 3.3.1 订单列表
- **订单展示**:
  - 订单号、用户信息
  - 订单金额、状态
  - 下单时间
  - 支付方式
- **订单筛选**:
  - 按订单状态筛选
  - 按时间范围筛选
  - 按用户搜索
  - 按订单号搜索
- **批量操作**:
  - 批量更新状态
  - 批量导出订单
  - 批量打印订单

#### 3.3.2 订单详情管理
- **订单信息查看**:
  - 完整订单详情
  - 用户信息
  - 商品清单
  - 收货地址
- **状态管理**:
  - 手动更新订单状态
  - 添加处理备注
  - 记录状态变更历史
- **订单操作**:
  - 订单取消
  - 退款处理（预留）
  - 订单修改

### 3.4 用户管理

#### 3.4.1 用户信息管理
- **用户列表**:
  - 用户基本信息显示
  - 注册时间、最后登录
  - 账户状态
  - 推荐关系
- **用户详情**:
  - 详细个人信息
  - 订单历史
  - 消费统计
  - 地址信息
- **用户操作**:
  - 启用/禁用账户
  - 重置密码
  - 查看用户活动记录

#### 3.4.2 用户统计
- **注册统计**:
  - 注册用户总数
  - 时间段注册趋势
  - 推荐来源统计
- **活跃度统计**:
  - 活跃用户数量
  - 登录频率分析
  - 购买行为分析

### 3.5 数据统计

#### 3.5.1 业务统计
- **销售统计**:
  - 销售额趋势图
  - 订单数量统计
  - 商品销量排行
  - 收入分析图表
- **用户统计**:
  - 用户增长趋势
  - 用户活跃度
  - 用户地域分布
- **商品统计**:
  - 热销商品排行
  - 分类销售分析
  - 库存状态分析

#### 3.5.2 图表展示
- **图表类型**:
  - 折线图（趋势分析）
  - 柱状图（对比分析）
  - 饼图（占比分析）
  - 数据卡片（关键指标）
- **时间维度**:
  - 今日数据
  - 本周数据  
  - 本月数据
  - 自定义时间范围

### 3.6 系统管理

#### 3.6.1 系统配置
- **基础配置**:
  - 系统名称
  - 默认语言
  - 货币符号
  - 免邮费阈值
- **业务配置**:
  - 订单设置
  - 支付配置
  - 库存预警阈值
  - 折扣规则设置

#### 3.6.2 操作日志
- **日志记录**:
  - 管理员操作记录
  - 操作时间、IP地址
  - 操作类型、操作内容
  - 操作结果
- **日志查询**:
  - 按时间范围查询
  - 按操作员查询
  - 按操作类型筛选
  - 关键词搜索

#### 3.6.3 文件管理
- **上传文件管理**:
  - 文件列表查看
  - 文件大小统计
  - 无用文件清理
- **备份管理**:
  - 数据库备份
  - 文件备份
  - 定期清理策略

## 4. 多语言支持

### 4.1 语言配置
- **支持语言**:
  - 中文简体 (zh-CN)
  - 英语 (en-US)
  - 泰语 (th-TH) - 默认语言
- **切换方式**:
  - 系统级别语言设置
  - 用户个人语言偏好
  - URL参数语言切换

### 4.2 本地化内容
- **界面文本**: 所有UI文本支持多语言
- **商品信息**: 商品名称、描述支持多语言
- **系统消息**: 错误提示、成功消息本地化
- **货币格式**: 根据语言自动调整货币显示

## 5. 移动端支持

### 5.1 响应式设计
- **移动优先**: 设计优先考虑移动设备
- **自适应布局**: 支持各种屏幕尺寸
- **触控优化**: 触控友好的交互设计
- **加载优化**: 移动端加载速度优化

### 5.2 移动端功能
- **完整功能**: 移动端支持所有桌面端功能
- **手势支持**: 滑动、点击等手势操作
- **离线支持**: 基础页面离线缓存
- **推送通知**: 预留推送通知接口

## 6. 安全功能

### 6.1 用户安全
- **密码安全**: bcrypt加密，10轮加盐
- **会话安全**: JWT token，定期过期
- **输入验证**: 严格的数据格式验证
- **权限控制**: 基于角色的访问控制

### 6.2 系统安全
- **文件上传**: 类型限制，大小控制
- **SQL注入**: ORM防护，参数化查询
- **XSS防护**: 输出转义，内容过滤
- **CSRF防护**: CORS配置，令牌验证

## 7. 扩展功能

### 7.1 预留接口
- **支付网关**: 支持接入第三方支付
- **短信服务**: 验证码发送接口
- **邮件服务**: 邮件通知功能
- **推送服务**: 消息推送功能

### 7.2 扩展能力
- **插件系统**: 模块化扩展能力
- **API开放**: RESTful API开放接口
- **主题系统**: 可自定义界面主题
- **多租户**: 支持多商家模式

## 8. 性能特性

### 8.1 性能优化
- **缓存策略**: 静态资源缓存
- **图片优化**: WebP格式支持
- **懒加载**: 路由级别懒加载
- **压缩传输**: gzip压缩

### 8.2 监控功能
- **性能监控**: 接口响应时间监控
- **错误监控**: 异常捕获和记录
- **用户行为**: 用户操作行为分析
- **系统状态**: 系统健康状态检查

---

*最后更新时间: 2024年*
*版本: v1.0*
